apiVersion: v1
kind: Secret
metadata:
  name: queue-config
type: Opaque
data:
  URI: "aHR0cHM6Ly9zcXMuYXAtc291dGgtMS5hbWF6b25hd3MuY29tLzEzMTIyMDIzNzA3MS90ZXN0Cg=="

---

apiVersion: oldmonk.evalsocket.in/v1
kind: QueueAutoScaler
metadata:
  name: lifecycle
spec:
  type : "SQS"
  option :
    region: 'ap-south-1'
  secrets : queue-config
  maxPods : 6
  minPods : 1
  scaleDown :
    amount : 1
    threshold : 3
  scaleUp :
    amount : 1
    threshold : 4
  deployment : 'nginx-deployment'
  autopilot : true
  labels:
    env: dev
    app: nginx-deployment
    version: v1
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0
      maxSurge: 1
  appSpec: 
    name: nginx
    image: nginx:1.15.4
    ports:
      - containerPort: 80
    envFrom:
      - secretRef:
        name: nginx-deployment
